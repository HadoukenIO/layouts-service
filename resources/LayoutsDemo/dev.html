<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Demo App - App 1</title>
</head>
<body>
    <h3>App 1 - Demo Layout "Manager"</h3>
    <input value="Name of Layout" id="layoutName">
    <script src="../LayoutsService/client/global.js"></script>
    <script>
        const launchDir = location.href.slice(0, location.href.lastIndexOf('/'));

        // Add some JS
        const jsScript = document.createElement('script');
        jsScript.setAttribute('src', `${launchDir}/parent.js`);
        document.body.appendChild(jsScript);

        // SET LAYOUT
        const setButton = document.createElement('button');
        setButton.innerText = 'Set Layout'
        setButton.onclick = async () => {
            const name = document.getElementById('layoutName').value;
            const layout = await window.LayoutsManager.saveCurrentLayout(name);
            document.getElementById('showLayout').innerHTML = JSON.stringify(layout, null, 2);
        }
        document.body.appendChild(setButton);

        // GET LAYOUT
        const getButton = document.createElement('button');
        getButton.innerText = 'Get Layout'
        getButton.onclick = async () => {
            const name = document.getElementById('layoutName').value;
            const layout = await window.LayoutsManager.getLayout(name);
            document.getElementById('showLayout').innerHTML = JSON.stringify(layout, null, 2);
        }
        document.body.appendChild(getButton);

        // GET ALL LAYOUTS
        const getNamesButton = document.createElement('button');
        getNamesButton.innerText = 'Get All Layouts'
        getNamesButton.onclick = async () => {
            const layoutNames = await window.LayoutsManager.getAllLayoutNames();
            document.getElementById('showLayout').innerHTML = JSON.stringify(layoutNames, null, 2);
        }
        document.body.appendChild(getNamesButton);

        // RESTORE LAYOUT
        const restoreButton = document.createElement('button');
        restoreButton.innerText = 'Restore Layout'
        restoreButton.onclick = async () => {
            const name = document.getElementById('layoutName').value;
            const layout = await window.LayoutsManager.restoreLayout(name);
            console.log('after layout,', layout)
        }
        document.body.appendChild(restoreButton);

        //CREATE CHILD
        let i = 0;
        const createChild = document.createElement('button');
        createChild.innerText = 'Create Child'
        createChild.onclick = () => {
            openChild('win' + i);
            i++;    
        }
        document.body.appendChild(createChild);

        //CREATE ONE APP
        const createApp = document.createElement('button');
        createApp.innerText = 'Create (one) App'
        createApp.onclick = () => {
            openApp();     
        }
        document.body.appendChild(createApp);

    </script>
    <div>
        <textArea id='showLayout' style="margin: 0px;width: 100%;height: 90%;"></textArea>
    </div>
    
</body>
</html>
